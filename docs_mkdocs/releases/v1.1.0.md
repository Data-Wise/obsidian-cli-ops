# Release Notes v1.1.0

## üéâ 10 New Features Added

This release adds significant improvements to the `obs` CLI tool, including 5 new commands, better debugging support, shell completion, and comprehensive documentation updates.

---

## ‚ú® New Features

### 1. `obs list` Command
Show all configured vaults and R project mappings at a glance.

```bash
obs list
```

**Output:**
- Root vault location
- Sub-vaults with ‚úì (exists) or ‚úó (missing) status
- Count of R project mappings
- Project name ‚Üí Obsidian folder mappings

### 2. `obs r-dev unlink` Command
Remove R project mappings when you're done.

```bash
cd ~/projects/RMediation
obs r-dev unlink
```

**Features:**
- Validates project exists before unlinking
- Graceful handling when no mapping exists
- Confirms successful unlinking

### 3. `obs r-dev status` Command
Check if current R project is linked to an Obsidian folder.

```bash
cd ~/projects/RMediation
obs r-dev status
```

**Shows:**
- R project root path
- Mapping status (‚úì Linked or ‚úó Not linked)
- Obsidian folder path
- Whether the folder exists
- Helpful hints for linking if not linked

### 4. `obs version` Command
Display version and project information.

```bash
obs version
```

**Output:**
- Version number
- Project description
- GitHub repository URL
- Documentation URL

### 5. `--verbose` / `-v` Flag
Enable detailed debug logging for all commands.

```bash
obs --verbose r-dev log plot.png
obs -v list
```

**Shows:**
- Directory traversal when finding R projects
- Configuration file loading
- Mapping lookups
- Internal operations

### 6. NO_COLOR Support
Respects the `NO_COLOR` environment variable standard.

```bash
NO_COLOR=1 obs check
```

**Features:**
- Automatically disables colors when `NO_COLOR` is set
- Also disables colors when output is not a TTY (pipes, files)
- Follows the [NO_COLOR standard](https://no-color.org/)

### 7. Shell Completion (Zsh & Bash)
Tab completion for all commands, subcommands, and flags.

**Installation:**
```bash
# Zsh
cp completions/_obs ~/.zsh/completions/

# Bash
source completions/obs.bash
```

**Features:**
- Main commands: `check`, `list`, `version`, `sync`, `install`, etc.
- R-Dev subcommands: `link`, `unlink`, `status`, `log`, `context`, `draft`
- Global flags: `--verbose`, `-v`
- File completion for `log` and `draft` commands
- Flag completion for `sync --force` and `install --all`

### 8. Example project_map.json
Added example configuration file showing proper JSON structure.

**Location:** `config/example.project_map.json`

**Shows:**
- 3 example R project ‚Üí Obsidian folder mappings
- Proper path format (absolute ‚Üí relative)
- Real-world examples from typical project structure

### 9. Updated Documentation
Comprehensive documentation updates covering all new features.

**Updated pages:**
- `docs_mkdocs/usage.md` - Global flags section, all core commands documented
- `docs_mkdocs/r-dev.md` - Added unlink, status, tips section

**New content:**
- Global flags (--verbose)
- All new commands
- Usage examples
- Tips for debugging

### 10. Jest Unit Tests
Comprehensive test suite with 22 passing tests.

**Test coverage:**
- Help and basic commands (5 tests)
- Dependency checking (1 test)
- Error handling (2 tests)
- Verbose mode (2 tests)
- R-Dev integration (2 tests)
- Configuration files (4 tests)
- Script structure (3 tests)

---

## üîß Technical Improvements

### Configuration Loading Refactor
- `help` and `check` commands no longer require config file
- Better error messages showing command name in "Unknown command" errors
- Graceful handling of empty arguments
- Improved shift count handling

### Code Quality
- Added `_log_verbose()` helper function
- Improved `_get_r_root()` with verbose logging
- Enhanced `_get_mapped_path()` with verbose logging
- Better separation of concerns (config loading vs command execution)

---

## üì¶ Files Added/Modified

| File | Type | Lines | Description |
|------|------|-------|-------------|
| `src/obs.zsh` | Modified | +150 | 4 new commands, verbose support, NO_COLOR |
| `completions/_obs` | New | 94 | Zsh completion script |
| `completions/obs.bash` | New | 70 | Bash completion script |
| `completions/README.md` | New | 100 | Completion installation guide |
| `config/example.project_map.json` | New | 5 | Example project mappings |
| `tests/obs.test.js` | New | 200 | Jest unit tests |
| `docs_mkdocs/usage.md` | Modified | +40 | Global flags, new commands |
| `docs_mkdocs/r-dev.md` | Modified | +25 | Unlink, status, tips |
| `package.json` | Modified | 1 | Version bump to 1.1.0 |
| `PROJECT_HUB.md` | Modified | +20 | Updated with all new features |

---

## üìä Test Results

```
Jest Tests:        22 passed
Shell Tests:        4 passed
Total:            26 tests ‚úÖ
Test Suites:       2 passed
Coverage:         Core commands, r-dev module, error handling
```

---

## üéØ Next Steps

Based on the updated PROJECT_HUB.md, here are the next quick wins:

1. **`obs config` command** - Manage configuration interactively
2. **`obs r-dev list`** - Show all R project mappings in a table
3. **Plugin update checker** - `obs install --update` to update plugins
4. **`obs init`** - Interactive setup wizard for first-time users
5. **Test coverage** - Add tests for new commands (status, version)

---

## üôè Acknowledgments

All features implemented and tested successfully with:
- 26 passing tests (22 Jest + 4 Shell)
- Zero breaking changes
- Full backward compatibility
- Comprehensive documentation

---

## üìö Resources

- **Documentation:** https://data-wise.github.io/obsidian-cli-ops/
- **Repository:** https://github.com/Data-Wise/obsidian-cli-ops
- **Project Hub:** See the GitHub repository for full feature list and roadmap
